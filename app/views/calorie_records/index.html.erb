<div class="mx-auto max-w-5xl px-4 py-6">
  <h1 class="mb-6 text-xl font-bold">カロリー履歴</h1>

  <% if @calorie_records.present? %>

    <% @calorie_records.group_by { |record| record.eat_date }.each do |date, records| %>

      <div class="mb-4 rounded-lg border bg-white p-4 shadow-sm">

        <!-- 日付ヘッダー -->
        <div class="flex items-center justify-between border-b pb-2 mb-2">
          <div class="font-semibold">
            <%= date %>
          </div>

          <div class="text-sm text-gray-600">
            合計 <%= records.sum(&:calorie) %> kcal
          </div>
        </div>

        <!-- 内訳 -->
        <div class="space-y-1 text-sm">
          <% records.each do |record| %>
            <div class="flex justify-between">
              <div>
                <%= record.meal_type %>
                <% if record.memo.present? %>
                  - <%= record.memo %>
                <% end %>
              </div>
              <div>
                <%= record.calorie %> kcal
              </div>
            </div>
          <% end %>
        </div>

      </div>

    <% end %>

  <% else %>
    <div class="rounded-lg border bg-white p-6">
      <p class="text-sm text-gray-600">まだ記録がありません。</p>
    </div>
  <% end %>
</div>